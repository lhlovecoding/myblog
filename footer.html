<script src="./module/nprogress.js"></script>
<script src="./module/jquery.pjax.js"></script>
<script>
  let scrollInit = 0;
  let fSize, headerHeight;
  $(function () {
    fSize = parseInt($(".left a").css("font-size"));
    headerHeight = parseInt($(".h-content").height());
    window.onscroll = function () {
      let sTop = event.target.scrollingElement.scrollTop;
      let height = parseInt($(".h-content").height());
      if (sTop - scrollInit > 0) {
        //向下滚动
        fSize = fSize - fSize * 0.01;
        fSize = fSize < 14 ? 14 : fSize;

        //头部得高度
        h = height - headerHeight * 0.05;
        minH = headerHeight * 0.7;
        h = h < minH ? minH : h;
      } else {
        fSize = fSize + fSize * 0.01;
        fSize = fSize > 32 ? 32 : fSize;

        //头部得高度
        h = height + headerHeight * 0.05;
        h = h > headerHeight ? headerHeight : h;
      }
      scrollInit = sTop;
      $(".h-content").css("height", h + "px");
      $(".left a").css("font-size", fSize);
    };
    if (location.pathname == "/index.html") {
      $("li a").eq(0).addClass("a-active");
    }
    $("ul li a").click(function () {
      $("ul li a").removeClass("a-active");
      $(this).addClass("a-active");
    });
    $("body").css({
      "background-color": "#fff",
    });
    $(document).pjax("a[data-pjax]", "#pjax-container", {
      fragment: "#pjax-container",
      timeout: 5000,
    });
    $(document).on("pjax:start", function () {
      NProgress.start();
    });
    $(document).on("pjax:end", function () {
      NProgress.done();
    });
    $(document).on("pjax:complete", function () {
      // Do something after PJAX request completes
    });
  });
</script>
